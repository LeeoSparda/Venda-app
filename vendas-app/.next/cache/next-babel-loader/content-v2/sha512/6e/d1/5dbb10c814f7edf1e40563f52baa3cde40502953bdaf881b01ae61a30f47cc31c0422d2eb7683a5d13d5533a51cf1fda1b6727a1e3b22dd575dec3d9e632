{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\vendas-app\\\\src\\\\components\\\\produtos\\\\listagem\\\\index.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { useEffect } from 'react';\nimport { Layout, Loader } from 'components';\nimport Link from 'next/link';\nimport Router from 'next/router';\nimport { TabelaProdutos } from './tabela';\nimport useSWR from 'swr';\nimport { httpClient } from 'app/http';\nimport { useProdutoService } from 'app/services';\nimport { useState } from 'react';\nexport var ListagemProdutos = function ListagemProdutos() {\n  _s();\n\n  var service = useProdutoService();\n\n  var _useState = useState([]),\n      messages = _useState[0],\n      setMessages = _useState[1];\n\n  var _useSWR = useSWR('/api/produtos', function (url) {\n    return httpClient.get(url);\n  }),\n      result = _useSWR.data,\n      error = _useSWR.error;\n\n  var _useState2 = useState([]),\n      lista = _useState2[0],\n      setLista = _useState2[1];\n\n  useEffect(function () {\n    setLista((result === null || result === void 0 ? void 0 : result.data) || []);\n  }, [result]);\n\n  var editar = function editar(produto) {\n    var url = \"/cadastros/produtos?id=\".concat(produto.id);\n    Router.push(url);\n  };\n\n  var deletar = function deletar(produto) {\n    service.deletar(produto.id).then(function (response) {\n      setMessages([{\n        tipo: \"success\",\n        texto: \"Produto excluido com sucesso!\"\n      }]);\n      var listaAlterada = lista === null || lista === void 0 ? void 0 : lista.filter(function (p) {\n        return p.id !== produto.id;\n      });\n      setLista(listaAlterada);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    titulo: \"Produtos\",\n    mensagens: messages,\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      href: \"/cadastros/produtos\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button is-warning\",\n        children: \"Novo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 19\n    }, _this), /*#__PURE__*/_jsxDEV(Loader, {\n      show: !result\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(TabelaProdutos, {\n      onEdit: editar,\n      onDelete: deletar,\n      produtos: lista\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(ListagemProdutos, \"hJfdXF7SUhpMtbNaFeo60C/Pa7k=\", false, function () {\n  return [useProdutoService, useSWR];\n});\n\n_c = ListagemProdutos;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListagemProdutos\");","map":{"version":3,"sources":["C:/vendas-app/src/components/produtos/listagem/index.tsx"],"names":["useEffect","Layout","Loader","Link","Router","TabelaProdutos","useSWR","httpClient","useProdutoService","useState","ListagemProdutos","service","messages","setMessages","url","get","result","data","error","lista","setLista","editar","produto","id","push","deletar","then","response","tipo","texto","listaAlterada","filter","p"],"mappings":";;;;;;AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,SAASC,MAAT,EAAiBC,MAAjB,QAA+B,YAA/B;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,cAAT,QAA+B,UAA/B;AAEA,OAAOC,MAAP,MAAmB,KAAnB;AACA,SAASC,UAAT,QAA2B,UAA3B;AAEA,SAASC,iBAAT,QAAkC,cAAlC;AACA,SAASC,QAAT,QAAyB,OAAzB;AAGA,OAAO,IAAMC,gBAA0B,GAAG,SAA7BA,gBAA6B,GAAM;AAAA;;AAE5C,MAAMC,OAAO,GAAGH,iBAAiB,EAAjC;;AAF4C,kBAGVC,QAAQ,CAAe,EAAf,CAHE;AAAA,MAGpCG,QAHoC;AAAA,MAG1BC,WAH0B;;AAAA,gBAIZP,MAAM,CACrB,eADqB,EACJ,UAAAQ,GAAG;AAAA,WAAIP,UAAU,CAACQ,GAAX,CAAeD,GAAf,CAAJ;AAAA,GADC,CAJM;AAAA,MAI9BE,MAJ8B,WAIpCC,IAJoC;AAAA,MAItBC,KAJsB,WAItBA,KAJsB;;AAAA,mBAOhBT,QAAQ,CAAY,EAAZ,CAPQ;AAAA,MAOpCU,KAPoC;AAAA,MAO7BC,QAP6B;;AAS5CpB,EAAAA,SAAS,CAAE,YAAM;AACboB,IAAAA,QAAQ,CAAC,CAAAJ,MAAM,SAAN,IAAAA,MAAM,WAAN,YAAAA,MAAM,CAAEC,IAAR,KAAgB,EAAjB,CAAR;AACH,GAFQ,EAEN,CAACD,MAAD,CAFM,CAAT;;AAIA,MAAMK,MAAM,GAAG,SAATA,MAAS,CAACC,OAAD,EAAsB;AACjC,QAAMR,GAAG,oCAA6BQ,OAAO,CAACC,EAArC,CAAT;AACAnB,IAAAA,MAAM,CAACoB,IAAP,CAAYV,GAAZ;AACH,GAHD;;AAKA,MAAMW,OAAO,GAAG,SAAVA,OAAU,CAACH,OAAD,EAAsB;AAClCX,IAAAA,OAAO,CAACc,OAAR,CAAgBH,OAAO,CAACC,EAAxB,EAA4BG,IAA5B,CAAiC,UAAAC,QAAQ,EAAI;AACzCd,MAAAA,WAAW,CAAC,CACR;AAAGe,QAAAA,IAAI,EAAE,SAAT;AAAoBC,QAAAA,KAAK,EAAE;AAA3B,OADQ,CAAD,CAAX;AAGA,UAAMC,aAAwB,GAAGX,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEY,MAAP,CAAe,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACT,EAAF,KAASD,OAAO,CAACC,EAArB;AAAA,OAAhB,CAAjC;AACAH,MAAAA,QAAQ,CAACU,aAAD,CAAR;AACH,KAND;AAOH,GARD;;AAUA,sBACI,QAAC,MAAD;AAAQ,IAAA,MAAM,EAAC,UAAf;AAA0B,IAAA,SAAS,EAAElB,QAArC;AAAA,4BACI,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC,qBAAX;AAAA,6BACI;AAAQ,QAAA,SAAS,EAAC,mBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,aADJ,eAII;AAAA;AAAA;AAAA;AAAA,aAJJ,eAIU;AAAA;AAAA;AAAA;AAAA,aAJV,eAKI,QAAC,MAAD;AAAQ,MAAA,IAAI,EAAE,CAACI;AAAf;AAAA;AAAA;AAAA;AAAA,aALJ,eAMI,QAAC,cAAD;AAAgB,MAAA,MAAM,EAAEK,MAAxB;AAAgC,MAAA,QAAQ,EAAEI,OAA1C;AAAmD,MAAA,QAAQ,EAAEN;AAA7D;AAAA;AAAA;AAAA;AAAA,aANJ;AAAA;AAAA;AAAA;AAAA;AAAA,WADJ;AAUH,CAtCM;;GAAMT,gB;UAEOF,iB,EAEgBF,M;;;KAJvBI,gB","sourcesContent":["import { useEffect } from 'react'\nimport { Layout, Loader } from 'components'\nimport Link from 'next/link'\nimport Router from 'next/router'\nimport { TabelaProdutos } from './tabela'\nimport { Produto } from 'app/models/produtos'\nimport useSWR from 'swr'\nimport { httpClient } from 'app/http'\nimport { AxiosResponse } from 'axios'\nimport { useProdutoService } from 'app/services'\nimport { useState } from 'react'\nimport { Alert } from 'components/common/message'\n\nexport const ListagemProdutos: React.FC = () => {\n\n    const service = useProdutoService();\n    const [ messages, setMessages ] = useState<Array<Alert>>([])\n    const { data: result, error } = useSWR<AxiosResponse<Produto[]>>\n                    ('/api/produtos', url => httpClient.get(url) )\n\n    const [ lista, setLista ] = useState<Produto[]>([])\n\n    useEffect( () => {\n        setLista(result?.data || [])\n    }, [result])\n\n    const editar = (produto: Produto) => {\n        const url = `/cadastros/produtos?id=${produto.id}`\n        Router.push(url)\n    } \n\n    const deletar = (produto: Produto) => {\n        service.deletar(produto.id).then(response => {\n            setMessages([\n                {  tipo: \"success\", texto: \"Produto excluido com sucesso!\" }\n            ])\n            const listaAlterada: Produto[] = lista?.filter( p => p.id !== produto.id )\n            setLista(listaAlterada)\n        })\n    }\n\n    return (\n        <Layout titulo=\"Produtos\" mensagens={messages}>\n            <Link href=\"/cadastros/produtos\">\n                <button className=\"button is-warning\">Novo</button>\n            </Link>\n            <br /><br />\n            <Loader show={!result} />\n            <TabelaProdutos onEdit={editar} onDelete={deletar} produtos={lista} />\n        </Layout>\n    )\n}"]},"metadata":{},"sourceType":"module"}